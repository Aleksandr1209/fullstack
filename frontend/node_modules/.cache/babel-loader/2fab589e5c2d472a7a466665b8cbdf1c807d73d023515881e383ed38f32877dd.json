{"ast":null,"code":"import React from\"react\";import Header from\"./components/Header\";import Footer from\"./components/Footer\";import Items from\"./components/Items\";import Categories from\"./components/Categories\";import ShowFullItem from\"./components/ShowFullItem\";import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";class App extends React.Component{constructor(props){super(props);this.state={orders:[],currentItems:[],items:[],showFullItem:false,fullItem:{},searchQuery:'',notificationMessage:'',showNotification:false};this.state.currentItems=this.state.items;this.addToOrder=this.addToOrder.bind(this);this.deleteOrder=this.deleteOrder.bind(this);this.chooseCategory=this.chooseCategory.bind(this);this.onShowItem=this.onShowItem.bind(this);}componentDidMount(){fetch('http://localhost:3001/api/product').then(response=>{return response.json();}).then(data=>this.setState({items:data}));}render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsx(Header,{orders:this.state.orders,onDelete:this.deleteOrder,onSearch:this.handleSearch.bind(this)}),/*#__PURE__*/_jsx(Categories,{chooseCategory:this.chooseCategory}),/*#__PURE__*/_jsx(Items,{onShowItem:this.onShowItem,items:this.state.currentItems,onAdd:this.addToOrder}),this.state.showFullItem&&/*#__PURE__*/_jsx(ShowFullItem,{onAdd:this.addToOrder,onShowItem:this.onShowItem,item:this.state.fullItem}),/*#__PURE__*/_jsx(Footer,{}),this.state.showNotification&&/*#__PURE__*/_jsx(Notification,{message:this.state.notificationMessage})]});}handleSearch(query){this.setState({searchQuery:query},()=>{this.filterItems();// После обновления запроса фильтруем товары\n});}filterItems(){const{items,searchQuery}=this.state;const filteredItems=items.filter(item=>{const title=item.title.toLowerCase();const category=item.category.toLowerCase();const query=searchQuery.toLowerCase();return title.includes(query)||category.includes(query);});this.setState({currentItems:filteredItems});}onShowItem(item){this.setState({fullItem:item});this.setState({showFullItem:!this.state.showFullItem});}chooseCategory(category){if(category==='all'){this.setState({currentItems:this.state.items});return;}this.setState({currentItems:this.state.items.filter(el=>el.category===category)});}deleteOrder(id){this.setState({orders:this.state.orders.filter(el=>el.id!==id)});}addToOrder(item){const isInArray=this.state.orders.some(el=>el.id===item.id);if(!isInArray){const updatedOrders=[...this.state.orders,item];this.setState({orders:updatedOrders},()=>{this.showNotification(\"\\u0422\\u043E\\u0432\\u0430\\u0440 \\\"\".concat(item.title,\"\\\" \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D \\u0432 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443!\"),item);});}}showNotification(message,item){this.setState({notificationMessage:message,showNotification:true,notificationItem:item});setTimeout(()=>{this.setState({showNotification:false});},3000);}}export default App;","map":{"version":3,"names":["React","Header","Footer","Items","Categories","ShowFullItem","Notification","jsx","_jsx","jsxs","_jsxs","App","Component","constructor","props","state","orders","currentItems","items","showFullItem","fullItem","searchQuery","notificationMessage","showNotification","addToOrder","bind","deleteOrder","chooseCategory","onShowItem","componentDidMount","fetch","then","response","json","data","setState","render","className","children","onDelete","onSearch","handleSearch","onAdd","item","message","query","filterItems","filteredItems","filter","title","toLowerCase","category","includes","el","id","isInArray","some","updatedOrders","concat","notificationItem","setTimeout"],"sources":["/Users/aleksandrmarkelov/Downloads/fullstack/frontend/src/App.js"],"sourcesContent":["  import React from \"react\";\n  import Header from \"./components/Header\";\n  import Footer from \"./components/Footer\";\n  import Items from \"./components/Items\";\n  import Categories from \"./components/Categories\";\n  import ShowFullItem from \"./components/ShowFullItem\";\n  import Notification from './components/Notification';\n\n  class App extends React.Component {\n    constructor(props){\n      super(props)\n      this.state = {\n        orders: [],\n        currentItems: [],\n        items: [],\n        showFullItem: false,\n        fullItem: {},\n        searchQuery: '',\n        notificationMessage: '',\n        showNotification: false\n      }\n      this.state.currentItems = this.state.items\n      this.addToOrder = this.addToOrder.bind(this)\n      this.deleteOrder = this.deleteOrder.bind(this)\n      this.chooseCategory = this.chooseCategory.bind(this)\n      this.onShowItem = this.onShowItem.bind(this)\n    }\n\n    componentDidMount() {\n      fetch('http://localhost:3001/api/product')\n        .then((response) => {\n          return response.json();\n        })\n        .then(data => this.setState({ items: data }));\n      }\n\n    render(){\n    return (\n      <div className=\"wrapper\">\n        <Header orders={this.state.orders} onDelete={this.deleteOrder} onSearch={this.handleSearch.bind(this)} />\n        <Categories chooseCategory={this.chooseCategory} />\n        <Items onShowItem={this.onShowItem} items={this.state.currentItems} onAdd={this.addToOrder} />\n  \n        {this.state.showFullItem && <ShowFullItem onAdd={this.addToOrder} onShowItem={this.onShowItem} item={this.state.fullItem} />}\n        <Footer />  \n        {this.state.showNotification && (\n        <Notification message={this.state.notificationMessage} />\n      )}\n      </div>\n      )\n    }\n  \n    handleSearch(query) {\n      this.setState({ searchQuery: query }, () => {\n        this.filterItems(); // После обновления запроса фильтруем товары\n      });\n    }\n\n    filterItems() {\n      const { items, searchQuery } = this.state;\n      const filteredItems = items.filter(item => {\n        const title = item.title.toLowerCase();\n        const category = item.category.toLowerCase();\n        const query = searchQuery.toLowerCase();\n        return title.includes(query) || category.includes(query);\n      });\n      this.setState({ currentItems: filteredItems });\n    }\n\n    onShowItem(item) {\n      this.setState({fullItem: item})\n      this.setState({showFullItem: !this.state.showFullItem})\n    }\n  \n    chooseCategory(category){\n      if(category === 'all') {\n        this.setState({currentItems: this.state.items})\n        return\n      }\n  \n      this.setState({\n        currentItems: this.state.items.filter(el => el.category === category)\n      })\n    }\n  \n    deleteOrder(id){\n      this.setState({orders: this.state.orders.filter(el => el.id !== id)})\n    }\n  \n    addToOrder(item) {\n      const isInArray = this.state.orders.some(el => el.id === item.id);\n    \n      if (!isInArray) {\n        const updatedOrders = [...this.state.orders, item];\n        this.setState({ orders: updatedOrders }, () => {\n          this.showNotification(`Товар \"${item.title}\" добавлен в корзину!`, item);\n        });\n      }\n    }\n\n    showNotification(message, item) {\n      this.setState({ notificationMessage: message, showNotification: true, notificationItem: item });  \n    \n      setTimeout(() => {\n        this.setState({ showNotification: false });\n      }, 3000);\n    }\n  }\n  export default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}